//// ------------------------------------------------------
//// THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
//// ------------------------------------------------------

Table User {
  id String [pk]
  firstname String
  lastname String
  email String [unique, not null]
  password String [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  deletedAt DateTime
  UserRole UserRole [not null]
}

Table Role {
  id Int [pk, increment]
  name String [unique, not null]
  description String
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  deletedAt DateTime
  UserRole UserRole [not null]
  RolePermission RolePermission [not null]
}

Table Permission {
  id Int [pk, increment]
  description String
  action ActionSubject [not null, default: 'READ']
  subject String [not null]
  condition String
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  deletedAt DateTime
  RolePermission RolePermission [not null]
}

Table UserRole {
  userId String [not null]
  roleId Int [not null]
  user User [not null]
  role Role [not null]

  indexes {
    (userId, roleId) [unique]
  }
}

Table RolePermission {
  roleId Int [not null]
  permissionId Int [not null]
  role Role [not null]
  permission Permission [not null]

  indexes {
    (roleId, permissionId) [unique]
  }
}

Enum ActionSubject {
  MANAGE
  CREATE
  READ
  UPDATE
  DELETE
}

Ref: UserRole.userId > User.id

Ref: UserRole.roleId > Role.id

Ref: RolePermission.roleId > Role.id

Ref: RolePermission.permissionId > Permission.id